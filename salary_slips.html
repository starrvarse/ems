<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salary Slips - Employee Management</title>
    
    <!-- Navbar and Salary Slips Specific CSS -->
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/salary_slips.css">
    
    <!-- Font Awesome CDN for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Universal NavBar -->
    <div id="navbar-container"></div>

    <!-- Main Content -->
    <div class="container">
        <h1>Salary Slip Management</h1>

        <!-- Create Button -->
        <button id="create-btn" class="create-btn"><i class="fas fa-plus"></i> Create Salary Slip</button>

        <!-- Searchable Filter -->
        <input type="text" id="search-input" placeholder="Search salary slips..." class="search-input">

        <!-- Table -->
        <table id="salary-slip-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Code</th>
                    <th>Loan Reduction</th>
                    <th>Loan Document Number</th> <!-- Added Loan Document Number column -->
                    <th>TA/DA</th>
                    <th>Salary</th>
                    <th>Net Payable</th>
                    <th>Date</th>
                    <th>Document Number</th>
                    <th>Salary for Month</th>
                    <th>Address</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="salary-slip-table-body">
                <!-- Dynamic content goes here -->
            </tbody>
        </table>
    </div>

    <!-- Popup Form for Adding/Editing Salary Slip -->
    <div id="popup-form" class="popup-form">
        <div class="form-container">
            <h2>Create Salary Slip</h2>
            
            <!-- Searchable Dropdown for Employee Name -->
            <label for="slip-name">Name:</label>
            <select id="slip-name" class="searchable-dropdown">
                <option value="" disabled selected>Select employee name</option>
                <!-- Employee names will be dynamically populated here -->
            </select>

            <label for="slip-code">Code:</label>
            <input type="text" id="slip-code" placeholder="Employee code" readonly> <!-- Code is readonly -->

            <!-- New Loan EMI Selection Field -->
            <label for="slip-loan-emi">Select Loan EMIs:</label>
            <select id="slip-loan-emi" class="searchable-dropdown" multiple>
                <!-- Loan EMIs will be dynamically populated here -->
            </select>

            <label for="slip-loan">Loan Reduction (Total EMI):</label>
            <input type="number" id="slip-loan" placeholder="Total EMI selected" step="0.01" readonly>
    
            <!-- New Field for displaying Loan Document Numbers -->
            <label for="slip-loan-doc">Loan Document Number(s):</label>
            <textarea id="slip-loan-doc" placeholder="Selected Loan Document Numbers" readonly></textarea> <!-- Display the selected Loan Document Numbers -->

            <label for="slip-ta-da">TA/DA:</label>
            <input type="number" id="slip-ta-da" placeholder="Enter TA/DA amount" step="0.01">
    
            <label for="slip-salary">Salary:</label>
            <input type="number" id="slip-salary" placeholder="Employee salary" readonly> <!-- Salary is readonly -->

            <!-- Date Field -->
            <label for="slip-date">Date:</label>
            <input type="date" id="slip-date" placeholder="Select date">
    
            <!-- Document Number Field (autogenerated and readonly) -->
            <label for="slip-document-number">Document Number:</label>
            <input type="text" id="slip-document-number" placeholder="Document Number" readonly>
    
            <!-- Salary for Month Dropdown -->
            <label for="slip-salary-month">Salary for Month:</label>
            <select id="slip-salary-month">
                <option value="January">January</option>
                <option value="February">February</option>
                <option value="March">March</option>
                <option value="April">April</option>
                <option value="May">May</option>
                <option value="June">June</option>
                <option value="July">July</option>
                <option value="August">August</option>
                <option value="September">September</option>
                <option value="October">October</option>
                <option value="November">November</option>
                <option value="December">December</option>
            </select>

            <!-- Address Field -->
            <label for="employee-address">Address:</label>
            <input type="text" id="employee-address" placeholder="N/A" readonly>

            <!-- Phone Field -->
            <label for="employee-phone">Phone:</label>
            <input type="text" id="employee-phone" placeholder="N/A" readonly>

            <!-- Email Field -->
            <label for="employee-email">Email:</label>
            <input type="text" id="employee-email" placeholder="N/A" readonly>
    
            <!-- Net Payable Field (readonly and calculated) -->
            <label for="slip-net-payable">Net Payable:</label>
            <input type="number" id="slip-net-payable" placeholder="Net payable amount" readonly> <!-- Net Payable is readonly -->
    
            <button id="submit-btn">Submit</button>
            <button id="cancel-btn">Cancel</button>
        </div>
    </div>
    
    <!-- Custom Delete Confirmation Modal -->
    <div id="delete-confirmation-modal" class="modal">
        <div class="modal-content">
            <p>Are you sure you want to delete this salary slip?</p>
            <button id="confirm-delete-btn" class="confirm-btn">Yes</button>
            <button id="cancel-delete-btn" class="cancel-btn">No</button>
        </div>
    </div>

    <div id="toast-notification" class="toast">
        <span id="toast-message"></span>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/salary_slips.js"></script>
</body>
</html>
