<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loans - Employee Management</title>

    <!-- Navbar and Loans Specific CSS -->
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/loans.css">

    <!-- Font Awesome CDN for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Universal NavBar -->
    <div id="navbar-container"></div>

    <!-- Main Content -->
    <div class="container">
        <h1>Loan Management</h1>

        <!-- Create Button -->
        <button id="create-btn" class="create-btn"><i class="fas fa-plus"></i> Create Loan Record</button>

        <!-- Searchable Filter -->
        <input type="text" id="search-input" placeholder="Search loans..." class="search-input">

        <!-- Table -->
        <table id="loan-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Document Number</th>
                    <th>Employee Name</th>
                    <th>Employee Code</th>
                    <th>Loan Amount</th>
                    <th>Tenure (Months)</th>
                    <th>EMI</th>
                    <th>Action</th> <!-- Removed Balance column -->
                </tr>
            </thead>
            <tbody id="loan-table-body">
                <!-- Dynamic content goes here -->
            </tbody>
        </table>
    </div>

    <!-- Popup Form for Adding/Editing Loan -->
    <div id="popup-form" class="popup-form">
        <div class="form-container">
            <h2>Create Loan Record</h2>

            <!-- Date Field -->
            <label for="loan-date">Date:</label>
            <input type="date" id="loan-date" placeholder="Select date">

            <!-- Document Number Field (autogenerated and readonly) -->
            <label for="loan-document-number">Document Number:</label>
            <input type="text" id="loan-document-number" placeholder="Document Number" readonly>

            <!-- Employee Name Dropdown -->
            <label for="loan-employee-name">Employee Name:</label>
            <select id="loan-employee-name" class="searchable-dropdown">
                <option value="" disabled selected>Select employee name</option>
                <!-- Employee names will be dynamically populated here -->
            </select>

            <!-- Employee Code (autopopulated based on Employee Name) -->
            <label for="loan-employee-code">Employee Code:</label>
            <input type="text" id="loan-employee-code" placeholder="Employee code" readonly>

            <!-- Loan Amount Field -->
            <label for="loan-amount">Loan Amount:</label>
            <input type="number" id="loan-amount" placeholder="Enter loan amount" step="0.01">

            <!-- Tenure Field (Months) -->
            <label for="loan-tenure">Tenure (Months):</label>
            <input type="number" id="loan-tenure" placeholder="Enter tenure in months">

            <!-- EMI Field (auto-calculated) -->
            <label for="loan-emi">EMI:</label>
            <input type="number" id="loan-emi" placeholder="EMI" readonly>

            <button id="submit-btn">Submit</button>
            <button id="cancel-btn">Cancel</button>
        </div>
    </div>

    <!-- Custom Delete Confirmation Modal -->
    <div id="delete-confirmation-modal" class="modal">
        <div class="modal-content">
            <p>Are you sure you want to delete this loan record?</p>
            <button id="confirm-delete-btn" class="confirm-btn">Yes</button>
            <button id="cancel-delete-btn" class="cancel-btn">No</button>
        </div>
    </div>

    <div id="toast-notification" class="toast">
        <span id="toast-message"></span>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/loans.js"></script>
</body>
</html>
